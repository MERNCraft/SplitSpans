<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta
name="viewport"
content="width=device-width, initial-scale=1.0"
>
<title>Selecting Whole Words</title>
<link rel="stylesheet" href="../public/styles.css">
<link rel="stylesheet" href="../public/media-queries.css">
<link rel="stylesheet" href="../public/prism/prism.css">

<script defer src="../public/prism/prism.js"></script>
<script defer src="../public/storage.js"></script>
<script defer src="../public/script.js"></script>
</head>

<body>
<main id="content">
<header>
<a href="https://MERNCraft.github.io"><img src="../public/svg/home.svg" alt="home"></a>
<h1>Selecting Whole Words</h1>
<h3>with window.getSelection() and Intl.Segmenter</h3>
<h4>November 2025</h4>
</header>
<nav
  id="content-header"
  aria-labelledby="content-header"
>
  <button type="button" class="previous" disabled>
    <img src="../public/svg/prev.svg" alt="previous" draggable="false">
  </button>
  <span class="previous-name"></span>
  <span class="spacer"></span>
  <button type="button" class="next">
    <img src="../public/svg/next.svg" alt="next" draggable="false">
  </button>
  <span class="next-name"></span>
</nav>

<section id="intro" aria-labelledby="intro" data-item="Introduction">
<h2>
<a href="#intro">Introduction</a>
</h2>
<p>I recently needed to find a simple way to select text on a web page,
ensuring that selections start and end with a whole word, and this
regardless of language or writing system, or how the HTML text was
formatted.</p>
<blockquote>
<p>❌ This is wh<span style="background-color: #960">at I wanted
</span>to avoid.</p>
<p>✅ This is <span style="background-color: #960">what I wanted</span>
to achieve.</p>
</blockquote>
<p>In European languages, spaces are used to separate words. But this is
not true for all Asian languages. In Thai, for instance, consonants and
vowels are written in a continuous stream, with spaces used to indicate
the end of a sentence. My knowledge of Thai is limited. I needed help to
find where words in Thai begin and end.</p>
<blockquote>
<p>❌ นี่คือสิ่งที่ฉันไม่อยาก<span style="background-color:#960">ใหเ
กิดขึ้</span>น</p>
<p>✅ นี่คือสิ่งที่ฉันไม่อยาก<span
style="background-color:#960">ให้เกิดขึ้น</span></p>
</blockquote>
<p>Enter <a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Segmenter">Intl.Segmenter</a>,
a relatively new JavaScript feature that is now widely available in
browsers everywhere.</p>
<p>To understand how selection works in a browser and what
Intl.Segmenter does, what better way is there than to write a tutorial
(for you, and for my future self) about it.</p>
<h3 id="why-might-you-want-to-read-this">Why might you want to read
this?</h3>
<p>If you are building a tool involving text selection, editing,
annotation, subtitles, or multilingual text handling, this tutorial
might be helpful for you, for tasks like: like:</p>
<ul>
<li>Snapping selections to whole words</li>
<li>Handling selection that begins in whitespace</li>
<li>Distinguishing punctuation vs typographic spaces</li>
<li>Extracting the right boundaries for DOM splitting</li>
<li>Supporting multilingual text in the browser</li>
</ul>
<p>Use cases might include:</p>
<ul>
<li>A collaborative writing environment like a Google Docs clone</li>
<li>An ebook reader, where user can look up words in a dictionary</li>
<li>An annotation tool for speeches, lyrics or poetry</li>
<li>An assisted reading tool</li>
<li>A language learning app</li>
</ul>
<p>Does this sound like something you are doing? If so, read on…</p>
<details class="tldr">
<summary>
TL;DR: Why do I need to do this?
</summary>
<p>I teach English as a foreign language to adults. I have friends who
teach their own native languages, to adults and to children. A big
question that we have is: “How to make learners want to spend time
practising their new language?” One way is to get them to watch films in
their target language. Or perhaps better yet (and free): YouTube videos
on subjects that interest them.</p>
<h3 id="youtube-auto-generated-transcripts">YouTube auto-generated
transcripts</h3>
<p>Many YouTube videos provide subtitles, and an interactive transcript.
You can show the subtitles by clicking on the
<code>Subtitles/closed caption</code> button in the YouTube toolbar, and
you can show the transcript by …</p>
<ul>
<li>Clicking on the <code>more...</code> button in the summary</li>
<li>Scrolling to near the end to find the <code>Show Transcript</code>
button</li>
<li>Making your web page wide enough to see the interactive transcript
to the side of your video.</li>
</ul>
<p>But the YouTube website is design for YouTube to optimize revenue.
Our language students don’t need all the ads and links and extra
content. They really just want a good video to watch, and help with
understanding what is being said.</p>
<p>Auto-generated subtitles can be wildly wrong and confusing. Even when
they are accurate, the timing of the subtitles can be awkward and
imprecise. A subtitle might contain speech both before and after a scene
change, and it might be too long to be comfortable. The transcript is
broken up into timed chunks that might not correspond to actual
sentences.</p>
<h3 id="doing-it-better">Doing it better</h3>
<p>I wanted to create something more like the system provided by <a
href="https://www.ted.com/talks/joshua_foer_feats_of_memory_anyone_can_do/transcript">ted.com</a>,
which:</p>
<ul>
<li>Shows the transcript in natural paragraphs</li>
<li>Uses a separate span for each natural break in the speech</li>
<li>Provides transcripts created by humans and translated by humans into
many different languages.</li>
</ul>
<p>I also wanted to add a feature that allows language learners to play
a particular phrase or sentence in a loop, perhaps a little more slowly,
so that they have the chance to hear how the speaker actually pronounces
the words.</p>
<p>A subtitle might say: “It’s going to be good!” but the speaker might
make a sound like “Sgonnbegooh!” It can take a learner a little time to
get used to the shortcuts native speakers make, that other native
speakers can easily understand.</p>
<p>So, before making my “Learn a language through YouTube”, I had to
make myself a tool that would allow me to:</p>
<ul>
<li>Paste a YouTube URL</li>
<li>Automatically download the transcript</li>
<li>Automatically download the audio file, and generate a waveform
graphic from it, so I could easily see where sounds began and ended</li>
<li>Edit the text of the auto-generated transcript</li>
<li>Divide the transcript into natural segments for subtitles</li>
<li>Set the start and end times of each subtitle precisely</li>
<li>Allow a translator to follow the video and the original subtitles
while making a translation</li>
<li>Provide the translator with some flexibility about subtitle timing,
as different languages give the same information in a different
order.</li>
<li>Export the subtitles in the standard SRT format, to be used by my
“Learn a language through YouTube” app.</li>
</ul>
<p>Hence the need to split, merge and edit the text of HTML spans, as
described in this tutorial.</p>
<p>You can find the Subtitle Optimizer tool <a href="">here</a>, and the
“Learn a language through YouTube” app <a
href="https://stv.jazyx.com">here</a>.</p>
<blockquote>
<h3 id="fun-fact">Fun Fact</h3>
<p>One advantage of watching YouTube videos embedded in third-party site
is that <strong>the videos are never interrupted by ads</strong>.</p>
<p>And yes, I have contacted the content creators who videos I link to,
to make sure that they are happy that their work is used in this
educational manner, even if it means that they don’t earn any ad revenue
from it.</p>
</blockquote>
</details>
</section>

<div class="spacer"></div>
<footer id="content-footer">
<button type="button" class="previous" disabled>
  <img src="../public/svg/prev.svg" alt="prev" draggable="false">
</button>
<span class="previous-name"></span>
<span class="spacer"></span>
<button type="button" class="next">
  <img src="../public/svg/next.svg" alt="next" draggable="false">
</button>
<span class="next-name"></span>
</footer>
</main>

<nav
id="menu"
aria-labelledby="menu"
class="open"
>
<div class="theme">
  <label
  title="Dark"
  >
  <img src="../public/svg/dark.svg" alt="dark">
  <input
  type="radio"
  name="theme"
  id="theme-dark"
  checked
  >
  </label>
  <label
  title="Light"
  >
  <img src="../public/svg/light.svg" alt="light">
  <input
  type="radio"
  name="theme"
  id="theme-light"
  >
  </label>
  </div>
  <div class="paging">
  <label
  title="Split into sections"
  >
  <img src="../public/svg/pages.svg" alt="pages">
  <input
  type="radio"
  name="paging"
  id="pages"
  checked
  >
  </label>
  <label
  title="Show as a single page"
  >
  <img src="../public/svg/scroll.svg" alt="scroll">
  <input
  type="radio"
  name="paging"
  id="scroll"
  >
  </label>
  </div>
<img src="../public/svg/hamburger.svg" alt="menu" id="menu-icon">

<ul id="menu-items">
</ul>
<div id="repo">
<a
href="https://github.com/MERNCraft/SplitSpans/issues/new"
>
Feedback
</a>

<a
class="repo"
href="https://github.com/MERNCraft/SplitSpans"
>
<img src="../public/svg/github.svg" alt="github logo">
<span>GitHub repository</span>
</a>
</div>
</nav>
</body>
</html>